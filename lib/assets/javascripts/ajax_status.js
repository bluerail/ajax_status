// Generated by CoffeeScript 1.9.1
(function() {
  var hide_status, show_status;

  window.ajax_status = {
    delay: 500,
    animate: true,
    "class": 'ajax-status-default',
    text: 'Loadingâ€¦',
    html: "<div id=\"ajax-status\" class=\"%%CLASS%%\">\n  <span class=\"ajax-status-animate\"></span>\n  <span class=\"ajax-status-text\">%%TEXT%%</span>\n</div>"
  };

  hide_status = function() {
    return $('#ajax-status').slideUp(150, function() {
      return $('#ajax-status').remove();
    });
  };

  show_status = function() {
    $(document.body).append(ajax_status.html.replace('%%TEXT%%', window.ajax_status.text).replace('%%CLASS%%', window.ajax_status["class"]));
    return $('#ajax-status').slideDown(150, function() {
      var fun;
      if (!ajax_status.animate) {
        return;
      }
      fun = function() {
        if ($('#ajax-status .ajax-status-animate').length === 0 || !ajax_status.animate) {
          return;
        }
        return $('#ajax-status .ajax-status-animate').css('left', "-" + ($('#ajax-status .ajax-status-animate').outerWidth()) + "px").animate({
          left: ($('#ajax-status').outerWidth()) + "px"
        }, {
          duration: 2000,
          complete: fun
        });
      };
      return fun();
    });
  };

  $(document).on('ajax:before ajaxStart page:fetch', function() {
    $(document.body).css('cursor', 'wait');
    show_status.cancel();
    return show_status.delay(ajax_status.delay);
  });

  $(document).on('ajax:complete ajaxComplete page:change', function() {
    $(document.body).css('cursor', '');
    show_status.cancel();
    return hide_status();
  });

}).call(this);
